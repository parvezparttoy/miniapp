<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Telegram Mini App ‚Äî Ads Unlock</title>

  <!-- Telegram SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Axidum / Adexium SDK -->
  <script src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>

  <style>
    :root{
      --bg1:#0f172a;      /* dark slate */
      --bg2:#111827;      /* near black */
      --card:#0b1220;     /* deep card */
      --card-border:#1f2a44;
      --text:#e5e7eb;     /* light text */
      --muted:#9aa4b2;    /* muted text */
      --ok:#22c55e;       /* green */
      --brand:#111;
      --accent:#60a5fa;   /* blue accent */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      color:var(--text);
      font:14px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background: radial-gradient(1200px 600px at 20% -10%, #1e293b 0%, transparent 60%),
                  radial-gradient(1000px 500px at 100% 10%, #0b3b61 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    .wrap{max-width:960px;margin:0 auto;padding:18px 16px;flex:1}
    h2{
      margin:8px 0 18px;
      font-weight:800; letter-spacing:.2px;
      font-size:22px;
      display:flex;align-items:center;gap:10px;
    }
    .badge{
      font-size:11px;color:#0f172a;background:#93c5fd;border-radius:999px;
      padding:4px 8px;font-weight:800;
    }

    .card{
      background:linear-gradient(180deg, #0e1629, #0a1220);
      border:1px solid var(--card-border);
      border-radius:18px;padding:14px;margin-bottom:16px;
      box-shadow:0 10px 25px rgba(2,6,23,.35), inset 0 1px 0 rgba(255,255,255,.03);
    }
    .thumb{width:100%;aspect-ratio:16/9;object-fit:cover;border-radius:12px;background:#1f2937}
    .title{font-weight:800;margin:12px 0 6px;font-size:16px}
    .desc{color:var(--muted);margin:0 0 12px}
    .progress{height:8px;background:#101826;border:1px solid #1f2a44;border-radius:999px;overflow:hidden;margin-bottom:12px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#a3e635);transition:width .3s}
    .row{display:flex;gap:10px}
    .btn{
      flex:1;padding:11px 12px;border:none;border-radius:12px;font-weight:800;
      letter-spacing:.2px; cursor:pointer;
    }
    .watch{background:#2563eb;color:#fff;box-shadow:0 6px 16px rgba(37,99,235,.35)}
    .watch.disabled{background:#334155;color:#94a3b8;cursor:not-allowed;box-shadow:none}
    .join{background:#334155;color:#cbd5e1}
    .join.ready{background:var(--ok);color:#0b1321;box-shadow:0 6px 16px rgba(34,197,94,.35)}

    /* modal */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,.7);backdrop-filter:blur(2px);
      display:none;align-items:center;justify-content:center;padding:16px;z-index:9999}
    .sheet{width:100%;max-width:420px;background:#0b1220;border:1px solid var(--card-border);
      border-radius:16px;overflow:hidden;box-shadow:0 20px 50px rgba(0,0,0,.6)}
    .sheethd{padding:12px 14px;border-bottom:1px solid var(--card-border);display:flex;justify-content:space-between;align-items:center}
    .sheethd b{color:#93c5fd}
    .sheetbd{padding:14px}
    .close{border:none;background:transparent;font-size:18px;color:#cbd5e1;cursor:pointer}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}

    /* footer */
    .footer{
      width:100%;
      border-top:1px solid rgba(255,255,255,.08);
      background:rgba(15,23,42,.4);
    }
    .footer-inner{
      max-width:960px;margin:0 auto;padding:14px 16px;
      display:flex;flex-wrap:wrap;gap:8px;justify-content:space-between;align-items:center;
      color:#cbd5e1;font-size:13px;
    }
    .footer a{
      color:#93c5fd;text-decoration:none;font-weight:800;
    }
    .footer a:hover{ text-decoration:underline }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Telegram Mini App ‚Äî Ads Unlock <span class="badge">PRO</span></h2>

    <!-- Card 1 -->
    <div class="card" data-id="p1">
      <img class="thumb" src="https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251018_193741_659.jpg" alt="Jannat Toha">
      <div class="title">Jannat Toha Vairal Video ü•µ</div>
      <p class="desc">‡¶ú‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶§ ‡¶§‡ßã‡¶π‡¶æ‡¶∞ ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï üòç</p>
      <div class="progress"><div class="bar" id="p1_bar"></div></div>
      <div class="row">
        <button class="btn watch" id="p1_watch">Watch Ads (0/10)</button>
        <button class="btn join" id="p1_join" disabled>Join Channel</button>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="card" data-id="p2">
      <img class="thumb" src="https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251018_194758_066.jpg" alt="Ridhii">
      <div class="title">Ridhii TikTok üíó</div>
      <p class="desc">‡¶∞‡¶ø‡¶ß‡ßÄ ‡¶Æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ü•µ</p>
      <div class="progress"><div class="bar" id="p2_bar"></div></div>
      <div class="row">
        <button class="btn watch" id="p2_watch">Watch Ads (0/10)</button>
        <button class="btn join" id="p2_join" disabled>Join Channel</button>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="card" data-id="p3">
      <img class="thumb" src="https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251016_155725_290.jpg" alt="Era Moni">
      <div class="title">Era Moni TikTok üíó</div>
      <p class="desc">‡¶á‡¶∞‡¶æ ‡¶Æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï üòçüí¶</p>
      <div class="progress"><div class="bar" id="p3_bar"></div></div>
      <div class="row">
        <button class="btn watch" id="p3_watch">Watch Ads (0/10)</button>
        <button class="btn join" id="p3_join" disabled>Join Channel</button>
      </div>
    </div>
  </div>

  <!-- Interstitial Modal -->
  <div class="modal" id="adModal">
    <div class="sheet">
      <div class="sheethd">
        <b>Sponsored</b>
        <button class="close" id="closeModal">‚úï</button>
      </div>
      <div class="sheetbd">
        <div id="ax-container" style="display:none"></div>
        <div class="hint">Ad ‡¶ö‡¶≤‡¶æ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡ßã‡¶ï‡¶æ‡¶∏‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® ‚Ä¢ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶§‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø: <b id="left">20</b>s</div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <div>App Community: <a href="https://t.me/VairalVideoInTelegram" data-tglink>t.me/VairalVideoInTelegram</a></div>
      <div>Made by: <a href="https://t.me/ToxicNexo" data-tglink>t.me/ToxicNexo</a></div>
    </div>
  </footer>

<script>
  // ===== CONFIG =====
  const WID = "feE5b0a3-a507-4b7e-b855-d09f29f46e71"; // ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ wid
  const JOIN_URL = "https://t.me/+JQdsBNK6nE1kNTg1";
  const REQUIRED = 10;

  const storeKey = (id) => `coins_${id}`;
  const pct = (v) => Math.min(100, Math.round((v/REQUIRED)*100));

  // Telegram link helper (in-web vs TG webapp)
  document.querySelectorAll('[data-tglink]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const href = a.getAttribute('href');
      if (window.Telegram?.WebApp?.openTelegramLink){
        e.preventDefault();
        Telegram.WebApp.openTelegramLink(href);
      }
    });
  });

  // init UI
  ["p1","p2","p3"].forEach(id=>{
    const coins = Number(localStorage.getItem(storeKey(id))||"0");
    document.getElementById(`${id}_bar`).style.width = pct(coins) + "%";
    const w = document.getElementById(`${id}_watch`);
    const j = document.getElementById(`${id}_join`);
    w.textContent = `Watch Ads (${Math.min(coins,REQUIRED)}/${REQUIRED})`;
    if(coins>=REQUIRED){ w.classList.add("disabled"); w.disabled=true; j.classList.add("ready"); j.disabled=false; }
  });

  // clicks
  ["p1","p2","p3"].forEach(id=>{
    document.getElementById(`${id}_watch`).onclick = ()=> openAd(id);
    document.getElementById(`${id}_join`).onclick = ()=>{
      const c = Number(localStorage.getItem(storeKey(id))||"0");
      if(c>=REQUIRED){
        if(window.Telegram?.WebApp?.openTelegramLink)
          Telegram.WebApp.openTelegramLink(JOIN_URL);
        else window.open(JOIN_URL,"_blank");
      }
    };
  });

  // ===== Interstitial with auto-reward =====
  const modal = document.getElementById("adModal");
  const closeModal = document.getElementById("closeModal");
  const leftEl   = document.getElementById("left");
  let timer=null,left=20,focused=true,activeCard=null,rewarded=false;

  function openAd(cardId){
    activeCard = cardId;
    left = 20; rewarded=false; focused=true;
    leftEl.textContent = left;
    modal.style.display = "flex";

    // trigger Axidum interstitial
    try{
      if(window.AdexiumWidget){
        const ax = new AdexiumWidget({ wid: WID, adFormat: "interstitial" });
        ax.autoMode();
      }
    }catch(e){ console.log("Adexium error", e); }

    const onF=()=>focused=true, onB=()=>focused=false;
    window.addEventListener("focus",onF); window.addEventListener("blur",onB);

    timer = setInterval(()=>{
      if(focused && left>0){
        left--; leftEl.textContent = left;
        if(left<=0 && !rewarded){
          rewarded = true;
          addCoin(cardId);      // time up ‚áí auto coin
          cleanup();
        }
      }
    },1000);

    function cleanup(){
      clearInterval(timer); timer=null;
      window.removeEventListener("focus",onF);
      window.removeEventListener("blur",onB);
      modal.style.display = "none";
    }
    closeModal.onclick = cleanup; // ‡¶Ü‡¶ó‡ßá‡¶á ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶π‡¶¨‡ßá ‡¶®‡¶æ
  }

  function addCoin(cardId){
    const key = storeKey(cardId);
    const cur = Number(localStorage.getItem(key)||"0");
    const next = Math.min(REQUIRED, cur+1);
    localStorage.setItem(key, next);

    // update UI
    document.getElementById(`${cardId}_bar`).style.width = pct(next)+"%";
    const w = document.getElementById(`${cardId}_watch`);
    const j = document.getElementById(`${cardId}_join`);
    w.textContent = `Watch Ads (${next}/${REQUIRED})`;
    if(next>=REQUIRED){ w.classList.add("disabled"); w.disabled=true; j.classList.add("ready"); j.disabled=false; }
  }
</script>
</body>
  </html>
