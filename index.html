<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unlimited Vairal Video ‚Äì Ads Unlock üîì</title>

  <!-- Telegram SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Adexora SDK (App ID: 650) -->
  <script src="https://adexora.com/cdn/ads.js?id=650"></script>

  <style>
    :root{
      --bg:#0b1220;--bg2:#0a1422;--card:#0d1426;--bd:#1f2a44;
      --txt:#e5e7eb;--mut:#a1a8b4;--ok:#22c55e;--pri:#22d3ee;--prid:#0ea5e9
    }
    *{box-sizing:border-box}
    body{margin:0;background:
      radial-gradient(1200px 600px at 10% -10%,#0f1f3e 0%,transparent 60%),
      radial-gradient(900px 420px at 95% -15%,#052b36 0%,transparent 60%),
      var(--bg2);color:#e5e7eb;font:14px/1.5 ui-sans-serif,system-ui}
    .wrap{max-width:960px;margin:0 auto;padding:18px 14px 110px}
    h2{margin:6px 0 12px;font-size:22px;font-weight:900}
    .view{display:none}.view.active{display:block}

    /* search (Home only) */
    .search{display:flex;gap:8px;align-items:center;background:#0d1426;border:1px solid #1f2a44;border-radius:14px;padding:10px 12px;margin:10px 0 14px}
    .search input{flex:1;background:transparent;border:0;outline:0;color:#e5e7eb;font-weight:800}

    /* cards */
    .card{position:relative;background:var(--card);border:1px solid var(--bd);border-radius:18px;padding:14px;margin-bottom:14px}
    .thumb{width:100%;aspect-ratio:16/9;object-fit:cover;border-radius:14px;background:#1f2937}
    .title{font-weight:900;margin:10px 0 4px}
    .names{font-size:12px;color:#a8b2c1;margin-bottom:8px}
    .desc{color:var(--mut);margin:0 0 10px}
    .progress{height:8px;background:#0c1322;border:1px solid var(--bd);border-radius:999px;overflow:hidden;margin-bottom:12px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#a3e635);transition:width .25s}
    .row{display:flex;gap:10px}
    .btn{flex:1;padding:12px;border:0;border-radius:12px;font-weight:900;cursor:pointer}
    .watch{background:linear-gradient(180deg,var(--pri),var(--prid));color:#001b30}
    .watch.disabled{background:#253244;color:#93a3b5;cursor:not-allowed}
    .join{background:#253244;color:#cbd5e1}
    .join.ready{background:var(--ok);color:#062012}

    /* like */
    .like{position:absolute;top:10px;right:10px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.2);
          width:48px;height:48px;border-radius:14px;display:grid;place-items:center;cursor:pointer}
    .like svg{width:26px;height:26px;fill:none;stroke:#e5e7eb;stroke-width:2}
    .like.active{background:rgba(244,63,94,.18);border-color:rgba(244,63,94,.4)}
    .like.active svg{fill:#f43f5e;stroke:#f43f5e}

    /* bottom dock */
    .dock{position:fixed;left:12px;right:12px;bottom:12px;background:#0c1322;border:1px solid rgba(255,255,255,.08);border-radius:22px;padding:12px 8px}
    .nav{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
    .tab{display:flex;flex-direction:column;align-items:center;gap:6px;padding:6px 0;color:#cbd5e1;text-decoration:none;cursor:pointer}
    .tab svg{width:22px;height:22px;stroke:#cbd5e1;fill:none;stroke-width:2}
    .tab.active{color:#7dd3fc}.tab.active svg{stroke:#7dd3fc}
    .tablabel{font-weight:900}

    .foot{font-size:12px;color:#9aa4b2;margin:10px 2px}
    .foot a{color:#93c5fd;font-weight:800;text-decoration:none}

    /* toast */
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:95px;background:rgba(34,197,94,.95);color:#062012;border:1px solid rgba(34,197,94,.6);
           padding:10px 14px;border-radius:10px;font-weight:900;display:none}
    .toast.show{display:block;animation:fade 1.8s ease-out 1}
    @keyframes fade{0%{opacity:0;transform:translate(-50%,8px)}10%{opacity:1}80%{opacity:1}100%{opacity:0}}
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Unlimited Vairal Video ‚Äì Ads Unlock üîì</h2>

    <!-- Search (Home only) -->
    <div id="searchWrap" class="search">
      <span style="color:#93c5fd;font-weight:900">üîé</span>
      <input id="searchInput" type="text" placeholder="Search posts (e.g. era, era video, ridhi)">
    </div>

    <!-- Views -->
    <div id="view-home" class="view active"></div>
    <div id="home-notes" class="foot">
      Invite friend: <a href="http://t.me/VairalVideoInTelegramBOT/AllLink" target="_blank" rel="noopener">http://t.me/VairalVideoInTelegramBOT/AllLink</a><br>
      App Community: <a href="http://t.me/VairalVideoInTelegramBOT">t.me/VairalVideoInTelegramBOT</a>
    </div>

    <div id="view-liked" class="view"><div id="liked-container"></div></div>

    <div id="view-tutorial" class="view">
      <div class="card"><div class="title">How to Unlock & Earn</div>
        <ol class="desc" style="margin-left:18px">
          <li>‚ÄúWatch Ads‚Äù ‡¶ö‡¶æ‡¶™‡¶≤‡ßá ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶ñ‡ßÅ‡¶≤‡¶¨‡ßá</li>
          <li><b>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá</b> ‡¶Ö‡¶ü‡ßã +1 coin ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá</li>
          <li>‡ßß‡ß¶/‡ßß‡ß¶ ‡¶π‡¶≤‡ßá ‚ÄúJoin Channel‚Äù ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶π‡¶¨‡ßá</li>
          <li>Join ‡¶ö‡¶æ‡¶™‡¶≤‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡¶ø‡¶ö‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶¨‡¶æ‡¶∞ 0/10 ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ</li>
        </ol>
      </div>
    </div>

    <div id="view-links" class="view">
      <div class="card" style="display:flex;justify-content:space-between;gap:12px;align-items:center">
        <div>
          <div class="title">Community</div>
          <div class="desc">t.me/VairalVideoInTelegram</div>
        </div>
        <button class="btn watch" data-go="https://t.me/VairalVideoInTelegram">Open</button>
      </div>
      <div class="card" style="display:flex;justify-content:space-between;gap:12px;align-items:center">
        <div>
          <div class="title">Demo Bot</div>
          <div class="desc">t.me/VairalVideoInTelegramBOT</div>
        </div>
        <button class="btn watch" data-go="http://t.me/VairalVideoInTelegramBOT">Open</button>
      </div>

      <div class="card">
        <div class="title" style="margin-bottom:10px">Invite friend</div>
        <div style="display:flex;gap:10px">
          <input id="inviteLink" value="http://t.me/VairalVideoInTelegramBOT/AllLink" readonly
                 style="flex:1;background:#0b1220;border:1px solid #1f2a44;color:#cfe0ff;border-radius:12px;padding:10px 12px;font-weight:800">
          <button class="btn watch" id="copyBtn" style="flex:0 0 auto">Copy</button>
        </div>
      </div>

      <div class="foot" style="text-align:center">Community: <a href="https://t.me/VairalVideoInTelegram">t.me/VairalVideoInTelegram</a></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">+1 coin added!</div>

  <!-- Bottom Nav -->
  <div class="dock">
    <div class="nav">
      <a class="tab active" data-tab="home">
        <svg viewBox="0 0 24 24"><path d="M3 10.5 12 3l9 7.5v9H4z"/></svg><span class="tablabel">Home</span>
      </a>
      <a class="tab" data-tab="liked">
        <svg viewBox="0 0 24 24"><path d="M12 21C8 18 3 14 3 9.5A4.5 4.5 0 0 1 11 8a4.5 4.5 0 0 1 8 1.5C19 14 14 18 12 21Z"/></svg><span class="tablabel">Liked</span>
      </a>
      <a class="tab" data-tab="tutorial">
        <svg viewBox="0 0 24 24"><path d="M4 5h12a3 3 0 0 1 3 3v11H7a3 3 0 0 1-3-3z"/><path d="M7 5v11a3 3 0 0 0 3 3h9"/></svg><span class="tablabel">Tutorial</span>
      </a>
      <a class="tab" data-tab="links">
        <svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7 0l3-3a5 5 0 0 0-7-7L11 5"/><path d="M14 11a5 5 0 0 0-7 0l-3 3a5 5 0 0 0 7 7l2-2"/></svg><span class="tablabel">Links</span>
      </a>
    </div>
  </div>

<script>
/* ========= CONFIG ========= */
// All posts use same reward/join link now:
const JOIN_URL = "https://t.me/+DsGQQrNOqjZiNzkx";
const REQUIRED = 10;

/* ========= DATA ========= */
const POSTS = [
  // existing
  { id:"p1", title:"Jannat Toha Vairal Video ü•µ", names:["Jannat Toha","‡¶ú‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶§ ‡¶§‡ßã‡¶π‡¶æ"],
    desc:"‡¶ú‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶§ ‡¶§‡ßã‡¶π‡¶æ‡¶∞ ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï üòç",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251018_193741_659.jpg", join:JOIN_URL,
    kw:"jannat toha ‡¶ú‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶§ ‡¶§‡ßã‡¶π‡¶æ video viral"
  },
  { id:"p2", title:"Ridhii TikTok üíó", names:["Ridhii Moni","‡¶∞‡¶ø‡¶ß‡ßÄ ‡¶Æ‡¶®‡¶ø"],
    desc:"‡¶∞‡¶ø‡¶ß‡ßÄ ‡¶Æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ü•µ",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251018_194758_066.jpg", join:JOIN_URL,
    kw:"ridhii ridhi moni ‡¶∞‡¶ø‡¶ß‡ßÄ video viral"
  },
  { id:"p3", title:"Era Moni TikTok üíó", names:["Era Moni","‡¶á‡¶∞‡¶æ ‡¶Æ‡¶®‡¶ø"],
    desc:"‡¶á‡¶∞‡¶æ ‡¶Æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï üòçüí¶",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251016_155725_290.jpg", join:JOIN_URL,
    kw:"era moni ira ‡¶á‡¶∞‡¶æ ‡¶Æ‡¶®‡¶ø video viral"
  },
  // new p4‚Äìp6
  { id:"p4", title:"Othoi TikToker üí¨", names:["Othoi","‡¶Ö‡¶•‡ßà"],
    desc:"‡¶Ö‡¶•‡ßà‡¶Ø‡¶º ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì üî•",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/refs/heads/main/IMG_20251112_172356_482.jpg", join:JOIN_URL,
    kw:"othoy othoi ‡¶Ö‡¶•‡ßà viral tiktok video"
  },
  { id:"p5", title:"Riddhi TikToker üí¨", names:["Riddhi","‡¶∞‡¶ø‡¶ß‡¶ø"],
    desc:"‡¶∂‡¶∏‡¶æ ‡¶∞‡¶ø‡¶ß‡¶ø‡¶∞ ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ü•íü•µ",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/refs/heads/main/IMG_20251112_173647_302.jpg", join:JOIN_URL,
    kw:"riddhi ridhi ‡¶∞‡¶ø‡¶ß‡¶ø viral tiktok video"
  },
  { id:"p6", title:"Afrin Moni TikTok üíó", names:["Afrin Moni","‡¶Ü‡¶´‡¶∞‡¶ø‡¶® ‡¶Æ‡¶®‡¶ø"],
    desc:"‡¶Ü‡¶´‡¶∞‡¶ø‡¶® ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ü•µüî•",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/refs/heads/main/IMG_20251112_174614_584.jpg", join:JOIN_URL,
    kw:"afrin moni ‡¶Ü‡¶´‡¶∞‡¶ø‡¶® ‡¶Æ‡¶®‡¶ø viral tiktok video"
  },
  // safe p7
  { id:"p7", title:"Kids TikTok üí¨", names:["Kids","‡¶¨‡¶æ‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶æ"],
    desc:"‡¶¨‡¶æ‡¶ö‡ßç‡¶ö‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡ßç‡¶≤‡¶ø‡¶™ üòÇüî•",
    img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/refs/heads/main/images%20(86).jpeg", join:JOIN_URL,
    kw:"kids funny ‡¶Æ‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì tiktok"
  }
];

/* ========= HELPERS ========= */
const qs=(s,p)=> (p||document).querySelector(s);
const qsa=(s,p)=> Array.from((p||document).querySelectorAll(s));
const sk=id=>`coins_${id}`;
const lk=id=>`liked_${id}`;
const dk=id=>`done_${id}`;
const pct=v=>Math.min(100,Math.round((v/REQUIRED)*100));
const idx=p=>(p.title+" "+p.desc+" "+(p.kw||" ")+" "+(p.names||[]).join(" ")).toLowerCase();

function showToast(msg){const t=qs('#toast');t.textContent=msg||'+1 coin added!';t.classList.remove('show');void t.offsetWidth;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),1600);}

/* ========= RENDER ========= */
function renderCard(p){
  const coins=Number(localStorage.getItem(sk(p.id))||"0");
  const liked=localStorage.getItem(lk(p.id))==="1";

  const el=document.createElement('div');
  el.className='card'; el.dataset.id=p.id;
  el.innerHTML = `
    <button class="like ${liked?'active':''}" data-like="${p.id}">
      <svg viewBox="0 0 24 24"><path d="M12 21C8 18 3 14 3 9.5A4.5 4.5 0 0 1 11 8a4.5 4.5 0 0 1 8 1.5C19 14 14 18 12 21Z"/></svg>
    </button>
    <img class="thumb" src="${p.img}" alt="">
    <div class="title">${p.title}</div>
    <div class="names">${(p.names||[]).join(' / ')}</div>
    <p class="desc">${p.desc}</p>
    <div class="progress"><div class="bar" id="${p.id}_bar" style="width:${pct(coins)}%"></div></div>
    <div class="row">
      <button class="btn watch ${coins>=REQUIRED?'disabled':''}" id="${p.id}_watch" ${coins>=REQUIRED?'disabled':''}>Watch Ads (${Math.min(coins,REQUIRED)}/${REQUIRED})</button>
      <button class="btn join ${coins>=REQUIRED?'ready':''}" id="${p.id}_join" ${coins>=REQUIRED?'':'disabled'}>Join Channel</button>
    </div>`;

  // like toggle
  qs('[data-like]',el).onclick=()=>{
    const b=qs('.like',el); const on=b.classList.toggle('active');
    localStorage.setItem(lk(p.id),on?'1':'0'); refreshLiked();
  };

  // watch ad
  qs('#'+p.id+'_watch',el).onclick=()=>openAd(p.id);

  // join -> move to bottom + reset
  qs('#'+p.id+'_join',el).onclick=()=>{
    const c=Number(localStorage.getItem(sk(p.id))||"0");
    if(c>=REQUIRED){
      if(window.Telegram?.WebApp?.openTelegramLink){ Telegram.WebApp.openTelegramLink(p.join); }
      else { window.open(p.join,'_blank'); }
      localStorage.setItem(dk(p.id),'1');            // mark done (to bottom)
      localStorage.removeItem(sk(p.id));             // reset coins
      renderHome(qs('#searchInput').value);          // rerender
    }
  };

  return el;
}

function renderHome(filter){
  const box=qs('#view-home'); box.innerHTML="";
  const tokens=(filter||"").trim().toLowerCase().split(/\s+/).filter(Boolean);
  const notDone=[], done=[];
  POSTS.forEach(p => (localStorage.getItem(dk(p.id))==='1'?done:notDone).push(p));

  const match = p=>{
    if(!tokens.length) return true;
    const s=idx(p); return tokens.some(t=>s.includes(t));
  };

  notDone.filter(match).forEach(p=>box.appendChild(renderCard(p)));
  done.filter(match).forEach(p=>box.appendChild(renderCard(p)));
}

function refreshLiked(){
  const c=qs('#liked-container'); c.innerHTML="";
  const lp=POSTS.filter(p=>localStorage.getItem(lk(p.id))==='1');
  if(!lp.length){ c.innerHTML='<div class="card"><div class="desc">‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡¶ø‡¶õ‡ßÅ ‚ù§Ô∏è ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ Home ‡¶•‡ßá‡¶ï‡ßá ‡¶π‡¶æ‡¶∞‡ßç‡¶ü ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®‡•§</div></div>'; return; }
  lp.forEach(p=>c.appendChild(renderCard(p)));
}

/* ========= SEARCH & NAV ========= */
qs('#searchInput').addEventListener('input', e=>renderHome(e.target.value));

qsa('.tab').forEach(t=>{
  t.onclick=()=>{
    qsa('.tab').forEach(x=>x.classList.remove('active')); t.classList.add('active');
    const name=t.dataset.tab;
    qsa('.view').forEach(v=>v.classList.remove('active'));
    qs('#view-'+name).classList.add('active');
    qs('#searchWrap').style.display = (name==='home')?'flex':'none';
    qs('#home-notes').style.display  = (name==='home')?'block':'none';
    if(name==='liked') refreshLiked();
    if(name==='home') renderHome(qs('#searchInput').value);
  };
});

/* ========= Links actions ========= */
qsa('[data-go]').forEach(btn=>{
  btn.onclick=()=>{
    const url=btn.getAttribute('data-go');
    if(window.Telegram?.WebApp?.openTelegramLink){ Telegram.WebApp.openTelegramLink(url); }
    else { window.open(url,'_blank'); }
  };
});
qs('#copyBtn').onclick=()=>{
  const v=qs('#inviteLink').value;
  if(navigator.clipboard?.writeText) navigator.clipboard.writeText(v).then(()=>showToast('Link copied'));
};

/* ========= ADS FLOW (reward only after real ad) ========= */
let adBusy=false; // prevent double taps

function waitAdexora(maxMs = 4000){
  return new Promise((resolve, reject)=>{
    if(window.showAdexora) return resolve();
    let elapsed = 0;
    const iv = setInterval(()=>{
      if(window.showAdexora){ clearInterval(iv); resolve(); }
      elapsed += 100;
      if(elapsed >= maxMs){ clearInterval(iv); reject(new Error("SDK not ready")); }
    }, 100);
  });
}

function withTimeout(promise, ms){
  return new Promise((resolve, reject)=>{
    const t = setTimeout(()=>reject(new Error("timeout")), ms);
    promise.then(v=>{clearTimeout(t); resolve(v);})
           .catch(e=>{clearTimeout(t); reject(e);});
  });
}

async function openAd(cardId){
  if(adBusy) return;
  adBusy=true;

  const watchBtn = document.getElementById(cardId + "_watch");
  if (watchBtn) { watchBtn.textContent = "Loading Ad..."; watchBtn.disabled = true; }

  try{
    // ensure SDK ready
    await waitAdexora();

    // try to show ad (12s timeout). If first fails, retry once.
    try{
      await withTimeout(window.showAdexora(), 12000);
    }catch(e){
      await withTimeout(window.showAdexora(), 12000);
    }

    // ‚úÖ ad finished ‚Üí add coin
    const key  = sk(cardId);
    const cur  = Number(localStorage.getItem(key) || "0");
    const next = Math.min(REQUIRED, cur + 1);
    localStorage.setItem(key, String(next));

    // UI update
    const bar = document.getElementById(cardId + "_bar");
    if (bar) bar.style.width = pct(next) + "%";
    if (watchBtn) {
      watchBtn.textContent = `Watch Ads (${next}/${REQUIRED})`;
      watchBtn.disabled = next >= REQUIRED;
      if(next >= REQUIRED){
        const j = document.getElementById(cardId + "_join");
        if (j){ j.classList.add("ready"); j.disabled = false; }
      }
    }
    showToast("+1 coin added ‚úÖ");
  }catch(err){
    // ‚ùå No ad ‚Üí no coin
    showToast("No ad available now, try again");
  }finally{
    // restore button label if still enabled
    if (watchBtn){
      const cur = Number(localStorage.getItem(sk(cardId)) || "0");
      if(cur < REQUIRED) { watchBtn.textContent = `Watch Ads (${cur}/${REQUIRED})`; watchBtn.disabled = false; }
    }
    adBusy=false;
  }
}

/* ========= First render ========= */
renderHome("");
</script>
</body>
  </html>
