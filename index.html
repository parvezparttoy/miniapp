<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unlimited Vairal Video ‚Äì Ads Unlock üîì</title>

  <!-- Telegram SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Axidum / Adexium SDK -->
  <script src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>

  <style>
    :root{
      --bg1:#0f172a; --bg2:#111827;
      --card:#0b1220; --card-border:#1f2a44;
      --text:#e5e7eb; --muted:#9aa4b2;
      --ok:#22c55e; --accent:#60a5fa;
      --primary:#2563eb; --soft:#334155;
      --like:#f43f5e;
    }
    *{box-sizing:border-box}
    body{
      margin:0;color:var(--text);
      font:14px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background: radial-gradient(1200px 600px at 20% -10%, #1e293b 0%, transparent 60%),
                  radial-gradient(1000px 500px at 100% 10%, #0b3b61 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh; display:flex; flex-direction:column;
      padding-bottom:76px; /* space for bottom nav */
    }
    .wrap{max-width:960px;margin:0 auto;padding:18px 16px;flex:1}
    h2{margin:8px 0 12px;font-weight:900;letter-spacing:.2px;font-size:22px}
    /* search */
    .search{
      position:sticky; top:0; z-index:10; margin:8px 0 16px;
      background:rgba(11,18,32,.55); backdrop-filter:blur(6px);
      border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px 12px; display:flex; gap:8px; align-items:center;
    }
    .search svg{width:18px;height:18px;stroke:#93c5fd;fill:none}
    .search input{flex:1;background:transparent;border:none;outline:none;color:#e5e7eb;font-weight:700}
    .search input::placeholder{color:#9aa4b2}

    .card{position:relative;background:linear-gradient(180deg,#0e1629,#0a1220);border:1px solid var(--card-border);
      border-radius:18px;padding:14px;margin-bottom:16px;box-shadow:0 10px 25px rgba(2,6,23,.35), inset 0 1px 0 rgba(255,255,255,.03)}
    .thumb{width:100%;aspect-ratio:16/9;object-fit:cover;border-radius:14px;background:#1f2937}
    .title{font-weight:800;margin:12px 0 6px;font-size:16px}
    .desc{color:var(--muted);margin:0 0 12px}
    .progress{height:8px;background:#101826;border:1px solid #1f2a44;border-radius:999px;overflow:hidden;margin-bottom:12px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#a3e635);transition:width .3s}
    .row{display:flex;gap:10px}
    .btn{flex:1;padding:11px 12px;border:none;border-radius:12px;font-weight:800;letter-spacing:.2px;cursor:pointer}
    .watch{background:var(--primary);color:#fff;box-shadow:0 6px 16px rgba(37,99,235,.35)}
    .watch.disabled{background:var(--soft);color:#94a3b8;cursor:not-allowed;box-shadow:none}
    .join{background:var(--soft);color:#cbd5e1}
    .join.ready{background:var(--ok);color:#0b1321;box-shadow:0 6px 16px rgba(34,197,94,.35)}
    /* big like button right-top */
    .like{
      position:absolute;top:10px;right:10px;background:rgba(255,255,255,.09);
      border:1px solid rgba(255,255,255,.18);backdrop-filter: blur(3px);
      width:48px;height:48px;border-radius:14px;display:grid;place-items:center;cursor:pointer;
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
    }
    .like svg{width:26px;height:26px;fill:none;stroke:#e5e7eb;stroke-width:2}
    .like.active{background:rgba(244,63,94,.22);border-color:rgba(244,63,94,.45)}
    .like.active svg{fill:var(--like);stroke:var(--like)}

    /* views */
    .view{display:none}
    .view.active{display:block}

    /* modal */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,.7);backdrop-filter:blur(2px);
      display:none;align-items:center;justify-content:center;padding:16px;z-index:9999}
    .sheet{width:100%;max-width:420px;background:#0b1220;border:1px solid var(--card-border);
      border-radius:16px;overflow:hidden;box-shadow:0 20px 50px rgba(0,0,0,.6)}
    .sheethd{padding:12px 14px;border-bottom:1px solid var(--card-border);display:flex;justify-content:space-between;align-items:center}
    .sheethd b{color:#93c5fd}
    .sheetbd{padding:14px}
    .close{border:none;background:transparent;font-size:18px;color:#cbd5e1;cursor:pointer}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}

    /* bottom nav */
    .bottom{
      position:fixed;left:0;right:0;bottom:0;z-index:999;
      display:flex;justify-content:space-around;gap:12px;padding:10px 12px 14px;
      background:rgba(10,18,32,.75);backdrop-filter:blur(6px);border-top:1px solid rgba(255,255,255,.08)
    }
    .tab{flex:1;max-width:25%;display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px 0;border-radius:16px;color:#cbd5e1;text-decoration:none;cursor:pointer}
    .tab svg{width:22px;height:22px;stroke:#cbd5e1;fill:none;stroke-width:2}
    .tab.active{color:#7dd3fc}
    .tab.active svg{stroke:#7dd3fc}
    .tablabel{font-weight:800}

    /* footer */
    .footer{width:100%;border-top:1px solid rgba(255,255,255,.08);background:rgba(15,23,42,.4)}
    .footer-inner{max-width:960px;margin:0 auto;padding:14px 16px;display:flex;flex-wrap:wrap;gap:8px;justify-content:space-between;align-items:center;color:#cbd5e1;font-size:13px}
    .footer a{color:#93c5fd;text-decoration:none;font-weight:800}
    .footer a:hover{text-decoration:underline}

    /* link buttons */
    .linkbtn{
      display:block;width:100%;text-align:center;border:1px solid var(--card-border);
      background:#0e1629;color:#cfe0ff;padding:12px;border-radius:12px;font-weight:900;text-decoration:none;margin:8px 0;
      box-shadow:0 8px 24px rgba(2,6,23,.35)
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Unlimited Vairal Video ‚Äì Ads Unlock üîì</h2>

    <!-- SEARCH -->
    <div class="search">
      <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4.3-4.3"/></svg>
      <input id="searchInput" type="text" placeholder="Search posts (e.g. era, ridhii, toha)"/>
    </div>

    <!-- HOME -->
    <div id="view-home" class="view active"></div>

    <!-- LIKED -->
    <div id="view-liked" class="view">
      <div id="liked-container"></div>
      <p style="color:var(--muted);margin-top:8px">‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã ‚ù§Ô∏è ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®, ‡¶∏‡ßá‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§</p>
    </div>

    <!-- TUTORIAL -->
    <div id="view-tutorial" class="view">
      <div class="card">
        <div class="title">How to Unlock & Earn</div>
        <ol class="desc" style="margin-left:18px">
          <li>‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá <b>Watch Ads</b> ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®‡•§</li>
          <li>Ad ‡¶ö‡¶≤‡¶æ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡ßã‡¶ï‡¶æ‡¶∏‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®; <b>‡ß®‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</b> ‡¶∂‡ßá‡¶∑‡ßá ‡¶Ö‡¶ü‡ßã ‡ßß ‡¶ï‡ßü‡ßá‡¶® ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá‡•§</li>
          <li>‡ßß‡ß¶/‡ßß‡ß¶ ‡¶π‡¶≤‡ßá <b>Join Channel</b> ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶π‡¶¨‡ßá ‚Äî ‡¶§‡¶æ‡¶§‡ßá‡¶á ‡¶ï‡¶®‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡¶®‡¶≤‡¶ï‡•§</li>
          <li>‡¶∞‡¶ø‡ßü‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶π‡¶≤‡ßá ‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç Axidum ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡•§</li>
        </ol>
        <p class="desc">‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ? <a href="https://t.me/VairalVideoInTelegram" data-tglink style="color:#93c5fd;text-decoration:none;font-weight:800">Community</a> ‡¶§‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶ì‡•§</p>
      </div>
    </div>

    <!-- LINKS -->
    <div id="view-links" class="view">
      <div class="card">
        <div class="title">Stats</div>
        <p class="desc">Total users (demo, this device): <b id="userCount">1</b></p>
      </div>
      <a class="linkbtn" href="https://t.me/VairalVideoInTelegram" data-tglink>Community</a>
      <a class="linkbtn" href="https://github.com/parvezparttoy/miniapp" target="_blank" rel="noopener">Invite Friend</a>
    </div>
  </div>

  <!-- Interstitial Modal -->
  <div class="modal" id="adModal">
    <div class="sheet">
      <div class="sheethd">
        <b>Sponsored</b>
        <button class="close" id="closeModal">‚úï</button>
      </div>
      <div class="sheetbd">
        <div id="ax-container" style="display:none"></div>
        <div class="hint">Ad ‡¶ö‡¶≤‡¶æ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡ßã‡¶ï‡¶æ‡¶∏‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® ‚Ä¢ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶§‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø: <b id="left">20</b>s</div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <div>App Community: <a href="https://t.me/VairalVideoInTelegram" data-tglink>t.me/VairalVideoInTelegram</a></div>
      <div>Made by: <a href="https://t.me/ToxicNexo" data-tglink>t.me/ToxicNexo</a></div>
    </div>
  </footer>

  <!-- Bottom Navigation -->
  <nav class="bottom">
    <a class="tab active" data-tab="home">
      <svg viewBox="0 0 24 24"><path d="M3 10.5 12 3l9 7.5v9a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-9z"/></svg>
      <span class="tablabel">Home</span>
    </a>
    <a class="tab" data-tab="liked">
      <svg viewBox="0 0 24 24"><path d="M12 21s-6-3.33-9-7.5C1 10 2.5 6.5 6 6.5c2 0 3.5 1.5 4 2s2-2 4-2c3.5 0 5 3.5 3 7.5C18 17.67 12 21 12 21z"/></svg>
      <span class="tablabel">Liked</span>
    </a>
    <a class="tab" data-tab="tutorial">
      <svg viewBox="0 0 24 24"><path d="M4 5h12a3 3 0 0 1 3 3v11H7a3 3 0 0 1-3-3V5z"/><path d="M7 5v11a3 3 0 0 0 3 3h9"/></svg>
      <span class="tablabel">Tutorial</span>
    </a>
    <a class="tab" data-tab="links">
      <svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7 0l3-3a5 5 0 0 0-7-7l-1.5 1.5"/><path d="M14 11a5 5 0 0 0-7 0l-3 3a5 5 0 0 0 7 7L12.5 20"/></svg>
      <span class="tablabel">Links</span>
    </a>
  </nav>

<script>
  // ===== CONFIG =====
  const WID = "feE5b0a3-a507-4b7e-b855-d09f29f46e71"; // Axidum wid
  const JOIN_URL = "https://t.me/+JQdsBNK6nE1kNTg1";
  const REQUIRED = 10;

  // Posts data
  let POSTS = [
    { id:"p1", title:"Jannat Toha Vairal Video ü•µ", desc:"‡¶ú‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶§ ‡¶§‡ßã‡¶π‡¶æ‡¶∞ ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï üòç",
      img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251018_193741_659.jpg", join:JOIN_URL },
    { id:"p2", title:"Ridhii TikTok üíó", desc:"‡¶∞‡¶ø‡¶ß‡ßÄ ‡¶Æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ü•µ",
      img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251018_194758_066.jpg", join:JOIN_URL },
    { id:"p3", title:"Era Moni TikTok üíó", desc:"‡¶á‡¶∞‡¶æ ‡¶Æ‡¶®‡¶ø ‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï üòçüí¶",
      img:"https://raw.githubusercontent.com/parvezparttoy/miniapp/main/IMG_20251016_155725_290.jpg", join:JOIN_URL }
  ];

  // Helpers
  const qs  = (s,p=document)=>p.querySelector(s);
  const qsa = (s,p=document)=>[...p.querySelectorAll(s)];
  const storeKey = (id)=>`coins_${id}`;
  const likeKey  = (id)=>`liked_${id}`;
  const doneKey  = (id)=>`done_${id}`;
  const pct = (v)=>Math.min(100, Math.round((v/REQUIRED)*100));

  // Demo user counter (local, device-scoped)
  (function(){
    const k='__local_user_count__';
    let n=Number(localStorage.getItem(k)||'0');
    if(!localStorage.getItem('__this_device_marked__')){
      n++; localStorage.setItem(k,String(n));
      localStorage.setItem('__this_device_marked__','1');
    }
    const el=qs('#userCount'); if(el) el.textContent=n;
  })();

  // Telegram link open helper
  qsa('[data-tglink]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const href = a.getAttribute('href');
      if (window.Telegram?.WebApp?.openTelegramLink){ e.preventDefault(); Telegram.WebApp.openTelegramLink(href); }
    });
  });

  // Render a single card
  function renderCard(post){
    const coins = Number(localStorage.getItem(storeKey(post.id))||"0");
    const liked = localStorage.getItem(likeKey(post.id)) === "1";
    const done  = localStorage.getItem(doneKey(post.id)) === "1";

    const card = document.createElement('div');
    card.className = 'card';
    card.setAttribute('data-id', post.id);
    card.innerHTML = `
      <button class="like ${liked?'active':''}" data-like="${post.id}" aria-label="like">
        <svg viewBox="0 0 24 24"><path d="M12 21s-6-3.33-9-7.5C1 10 2.5 6.5 6 6.5c2 0 3.5 1.5 4 2s2-2 4-2c3.5 0 5 3.5 3 7.5C18 17.67 12 21 12 21z"/></svg>
      </button>
      <img class="thumb" src="${post.img}" alt="">
      <div class="title">${post.title}</div>
      <p class="desc">${post.desc}</p>
      <div class="progress"><div class="bar" id="${post.id}_bar" style="width:${pct(coins)}%"></div></div>
      <div class="row">
        <button class="btn watch ${coins>=REQUIRED?'disabled':''}" id="${post.id}_watch" ${coins>=REQUIRED?'disabled':''}>
          Watch Ads (${Math.min(coins,REQUIRED)}/${REQUIRED})
        </button>
        <button class="btn join ${coins>=REQUIRED?'ready':''}" id="${post.id}_join" ${coins>=REQUIRED?'':'disabled'}>
          Join Channel
        </button>
      </div>
    `;
    // handlers
    card.querySelector(`#${post.id}_watch`).onclick = ()=> openAd(post.id);
    card.querySelector(`#${post.id}_join`).onclick = ()=>{
      const c = Number(localStorage.getItem(storeKey(post.id))||"0");
      if(c>=REQUIRED){
        if(window.Telegram?.WebApp?.openTelegramLink) Telegram.WebApp.openTelegramLink(post.join);
        else window.open(post.join,'_blank');
      }
    };
    card.querySelector('[data-like]').onclick = ()=>{
      const btn = card.querySelector('.like');
      const active = btn.classList.toggle('active');
      localStorage.setItem(likeKey(post.id), active?'1':'0');
      refreshLiked();
    };
    // grey out if done
    if(done){ card.style.opacity = .92; }
    return card;
  }

  // Render Home with optional filter & push completed posts to bottom
  function renderHome(filterText=''){
    const box = qs('#view-home'); box.innerHTML = '';
    const text = filterText.trim().toLowerCase();
    // split done / not-done
    const notDone = []; const done = [];
    POSTS.forEach(p=>{
      const isDone = localStorage.getItem(doneKey(p.id))==='1';
      (isDone?done:notDone).push(p);
    });
    const ordered = [...notDone, ...done]; // completed move to bottom

    ordered
      .filter(p => !text || p.title.toLowerCase().includes(text))
      .forEach(p => box.appendChild(renderCard(p)));
  }

  function refreshLiked(){
    const likedBox = qs('#liked-container');
    likedBox.innerHTML = '';
    const likedPosts = POSTS.filter(p=>localStorage.getItem(likeKey(p.id))==='1');
    if(!likedPosts.length){
      likedBox.innerHTML = '<div class="card"><div class="desc">‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡¶ø‡¶õ‡ßÅ ‚ù§Ô∏è ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ Home ‡¶•‡ßá‡¶ï‡ßá ‡¶π‡¶æ‡¶∞‡ßç‡¶ü ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®‡•§</div></div>';
      return;
    }
    likedPosts.forEach(p=>likedBox.appendChild(renderCard(p)));
  }

  // Search typing
  qs('#searchInput').addEventListener('input', (e)=>{
    renderHome(e.target.value);
  });

  // Bottom nav switch
  qsa('.tab').forEach(t=>{
    t.onclick = ()=>{
      qsa('.tab').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      const name = t.getAttribute('data-tab');
      qsa('.view').forEach(v=>v.classList.remove('active'));
      qs('#view-'+name).classList.add('active');
      if(name==='liked')  refreshLiked();
      if(name==='home')   renderHome(qs('#searchInput').value);
    };
  });

  // ===== Interstitial with auto-reward =====
  const modal = qs('#adModal');
  const closeModal = qs('#closeModal');
  const leftEl   = qs('#left');
  let timer=null,left=20,focused=true,activeCard=null,rewarded=false;

  function openAd(cardId){
    activeCard = cardId;
    left = 20; rewarded=false; focused=true;
    leftEl.textContent = left;
    modal.style.display = "flex";

    try{
      if(window.AdexiumWidget){
        const ax = new AdexiumWidget({ wid: WID, adFormat: "interstitial" });
        ax.autoMode();
      }
    }catch(e){ console.log("Adexium error", e); }

    const onF=()=>focused=true, onB=()=>focused=false;
    window.addEventListener('focus',onF); window.addEventListener('blur',onB);

    timer = setInterval(()=>{
      if(focused && left>0){
        left--; leftEl.textContent = left;
        if(left<=0 && !rewarded){
          rewarded = true;
          addCoin(cardId); cleanup();
        }
      }
    },1000);

    function cleanup(){
      clearInterval(timer); timer=null;
      window.removeEventListener('focus',onF);
      window.removeEventListener('blur',onB);
      modal.style.display = 'none';
    }
    closeModal.onclick = cleanup; // ‡¶Ü‡¶ó‡ßá‡¶á ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶π‡¶¨‡ßá ‡¶®‡¶æ
  }

  function addCoin(cardId){
    const key = storeKey(cardId);
    const cur = Number(localStorage.getItem(key)||"0");
    const next = Math.min(REQUIRED, cur+1);
    localStorage.setItem(key, next);

    // update UI in current DOM
    const bar = qs(`#${cardId}_bar`); if(bar) bar.style.width = pct(next)+'%';
    const w = qs(`#${cardId}_watch`); const j = qs(`#${cardId}_join`);
    if(w){ w.textContent = `Watch Ads (${next}/${REQUIRED})`; if(next>=REQUIRED){ w.classList.add('disabled'); w.disabled=true; } }
    if(j && next>=REQUIRED){ j.classList.add('ready'); j.disabled=false; }

    // if completed ‚Üí mark done & re-render with completed at bottom
    if(next>=REQUIRED){
      localStorage.setItem(doneKey(cardId),'1');
      renderHome(qs('#searchInput').value);
    }
  }

  // Initial render
  renderHome();
</script>
</body>
                                 </html>
