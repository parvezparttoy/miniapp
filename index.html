<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mining Bot</title>
  <style>
    :root{
      --bg:#0b0f16; --card:#121826; --muted:#9db2d3; --text:#e6f0ff;
      --line:#1e2a44; --accent:#ef0027; /* TRX red */
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:520px;margin:0 auto;padding:12px 12px 68px}
    .welcome{background:#151e2f;border:1px solid var(--line);padding:10px 12px;border-radius:12px;margin:8px 0}
    .title{font-size:18px;font-weight:800;margin:0;color:#7dd3fc}
    .nav{position:fixed;left:0;right:0;bottom:0;background:#0e1420;border-top:1px solid var(--line);display:flex}
    .nav button{flex:1;padding:10px 8px;background:transparent;border:0;color:#9fb4d6;font-weight:700}
    .nav button.active{color:#fff;border-top:3px solid var(--accent)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:12px;margin-top:12px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .row{display:flex;gap:10px;align-items:center}
    .col{display:flex;flex-direction:column;gap:10px}
    .btn{background:#111827;border:1px solid #2a3d61;color:#dbeafe;padding:10px 12px;border-radius:12px;font-weight:800}
    .btn.accent{background:var(--accent);border-color:var(--accent);color:#fff}
    .btn.ghost{background:#0e1626;border-color:#243754}
    .pill{display:inline-block;background:#0e1626;border:1px solid #243754;color:#9db2d3;padding:6px 10px;border-radius:999px;font-size:12px}
    .trx{width:84px;height:84px;border-radius:50%;display:grid;place-items:center;background:#22060a;border:2px solid #3c0b12;box-shadow:0 10px 30px rgba(239,0,39,.25)}
    .trx svg{width:48px;height:48px;fill:var(--accent)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    h2{margin:6px 0 8px;font-size:16px}
    a{color:#7dd3fc;text-decoration:none}
    .small{font-size:12px;color:var(--muted)}
    .center{text-align:center}
    .right{text-align:right}
    .hidden{display:none}
    .balance{font-size:22px;font-weight:900}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Welcome -->
    <div class="welcome">
      <div class="title">Welcome to our mining bot</div>
      <div class="small">আমাদের মাইনিং বটে স্বাগতম — নিচের ন্যাভ থেকে পেজ সিলেক্ট করুন।</div>
    </div>

    <!-- HOME -->
    <section id="page-home" class="page">
      <div class="card">
        <div class="row">
          <div class="trx">
            <!-- TRX logo -->
            <svg viewBox="0 0 512 512"><path d="M256 32 32 96l192 320 256-320L256 32zm0 64 150.8 44.1L224 376 87.6 134.1 256 96z"/></svg>
          </div>
          <div style="flex:1">
            <h2>হোম</h2>
            <div class="row" style="justify-content:space-between">
              <span class="pill">Mining: <b id="status">Stop</b></span>
              <span class="pill">Time <b id="time">00:00</b></span>
            </div>
            <div class="small" style="margin-top:8px">Mining চালু করতে “Mining” ট্যাবে গিয়ে Start চাপুন।</div>
          </div>
        </div>
      </div>
      <div class="card center">
        <div class="small">Current Plan: <b id="planName">None</b></div>
        <div class="small">Rate: <b id="rateText">0.000000 TRX/sec</b></div>
      </div>
    </section>

    <!-- MINING -->
    <section id="page-mining" class="page hidden">
      <div class="card center">
        <h2>Mining Control</h2>
        <div class="row" style="justify-content:center;gap:8px;margin:8px 0">
          <span class="pill">Status: <b id="status2">Stop</b></span>
          <span class="pill">Session: <b id="time2">00:00</b></span>
        </div>
        <button id="toggleMining" class="btn accent" style="width:100%">Start Mining</button>
      </div>
      <div class="card">
        <h2>Buy Mining Plan</h2>
        <div class="grid">
          <button class="btn ghost plan" data-plan="TM1"><b>Buy Mining TM1</b><br><span class="small">বেসিক • 0.000100 TRX/s</span></button>
          <button class="btn ghost plan" data-plan="TM2"><b>Buy Mining TM2</b><br><span class="small">মিড • 0.000300 TRX/s</span></button>
          <button class="btn ghost plan" data-plan="TM3"><b>Buy Mining TM3</b><br><span class="small">প্রো • 0.000700 TRX/s</span></button>
          <button class="btn" disabled><b>Coming soon</b><br><span class="small">—</span></button>
        </div>
        <div class="small" style="margin-top:8px">নোট: আপাতত প্ল্যান ফ্রি-তে সিলেক্ট করা যাবে (ডেমো)।</div>
      </div>
    </section>

    <!-- TASK -->
    <section id="page-task" class="page hidden">
      <div class="card">
        <h2>Task</h2>
        <div class="col">
          <!-- Task 1 -->
          <div class="row" style="justify-content:space-between">
            <div>
              <div><b>Join our channel</b></div>
              <a href="https://t.me/+JQdsBNK6nE1kNTg1" target="_blank">চ্যানেলে যাও</a>
              <div class="small">Join করে Complete চাপলে +0.1 TRX</div>
            </div>
            <button class="btn accent complete" data-id="t1">Complete</button>
          </div>
          <hr style="border:0;border-top:1px solid var(--line)">
          <!-- Task 2 -->
          <div class="row" style="justify-content:space-between">
            <div>
              <div><b>Join our channel 2</b></div>
              <a href="https://t.me/+JQdsBNK6nE1kNTg1" target="_blank">চ্যানেলে যাও</a>
              <div class="small">Join করে Complete চাপলে +0.1 TRX</div>
            </div>
            <button class="btn accent complete" data-id="t2">Complete</button>
          </div>
          <hr style="border:0;border-top:1px solid var(--line)">
          <!-- Task 3 -->
          <div class="row" style="justify-content:space-between">
            <div>
              <div><b>Join our channel 3</b></div>
              <a href="https://t.me/+JQdsBNK6nE1kNTg1" target="_blank">চ্যানেলে যাও</a>
              <div class="small">Join করে Complete চাপলে +0.1 TRX</div>
            </div>
            <button class="btn accent complete" data-id="t3">Complete</button>
          </div>
        </div>
      </div>
    </section>

    <!-- WALLET -->
    <section id="page-wallet" class="page hidden">
      <div class="card">
        <h2>Wallet</h2>
        <div class="row" style="justify-content:space-between;align-items:flex-end">
          <div>
            <div class="small">Main Balance</div>
            <div id="balance" class="balance">0.000000 TRX</div>
          </div>
          <div class="row" style="gap:8px">
            <button class="btn">Deposit</button>
            <button class="btn accent">Withdraw</button>
          </div>
        </div>
        <div class="small" style="margin-top:8px">ডিপোজিট/উইথড্র এখন শুধু UI—পরে যুক্ত করব।</div>
      </div>
    </section>
  </div>

  <!-- Bottom Nav -->
  <div class="nav">
    <button data-tab="home" class="active">Home</button>
    <button data-tab="mining">Mining</button>
    <button data-tab="task">Task</button>
    <button data-tab="wallet">Wallet</button>
  </div>

  <script>
    // ====== STATE (localStorage) ======
    const S = JSON.parse(localStorage.getItem('mining_state')||'{}');
    const state = Object.assign({
      balance: 0,                // TRX
      mining: false,
      sessionSec: 0,             // seconds in current session
      plan: 'None',              // TM1/TM2/TM3
      rate: 0,                   // TRX per second
      lastTick: Date.now(),
      tasks: { t1:false, t2:false, t3:false }
    }, S);

    function save(){ localStorage.setItem('mining_state', JSON.stringify(state)); }

    // ====== UI HELPERS ======
    const $ = (q)=>document.querySelector(q);
    const $$= (q)=>document.querySelectorAll(q);

    function fmtTRX(x){ return (Math.floor(x*1e6)/1e6).toFixed(6); }
    function secToMMSS(s){ const m = Math.floor(s/60), ss = s%60; return `${String(m).padStart(2,'0')}:${String(ss).padStart(2,'0')}`; }

    // Elements
    const statusEl = $('#status'), timeEl = $('#time');
    const status2El = $('#status2'), time2El = $('#time2');
    const planNameEl = $('#planName'), rateTextEl = $('#rateText');
    const balanceEl = $('#balance');
    const toggleBtn = $('#toggleMining');

    // ====== RENDER ======
    function render(){
      statusEl.textContent = state.mining ? 'Start' : 'Stop';
      status2El.textContent = state.mining ? 'Start' : 'Stop';
      timeEl.textContent = secToMMSS(state.sessionSec);
      time2El.textContent = secToMMSS(state.sessionSec);
      planNameEl.textContent = state.plan;
      rateTextEl.textContent = `${fmtTRX(state.rate)} TRX/sec`;
      balanceEl.textContent = `${fmtTRX(state.balance)} TRX`;
      toggleBtn.textContent = state.mining ? 'Stop Mining' : 'Start Mining';

      // Disable completed tasks
      $$('.complete').forEach(b=>{
        const id = b.dataset.id;
        if(state.tasks[id]){ b.textContent='Completed'; b.disabled=true; }
      });
    }

    // ====== NAV ======
    $$('.nav button').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        $$('.nav button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const tab = btn.dataset.tab;
        $$('.page').forEach(p=>p.classList.add('hidden'));
        $('#page-'+tab).classList.remove('hidden');
      });
    });

    // ====== MINING TOGGLE ======
    toggleBtn.addEventListener('click', ()=>{
      state.mining = !state.mining;
      if(state.mining){ state.lastTick = Date.now(); }
      render(); save();
    });

    // ====== BUY PLANS (free select for now) ======
    const PLAN_RATES = { TM1: 0.000100, TM2: 0.000300, TM3: 0.000700 };
    $$('.plan').forEach(b=>{
      b.addEventListener('click', ()=>{
        const p = b.dataset.plan;
        state.plan = p;
        state.rate = PLAN_RATES[p] || 0;
        render(); save();
        alert(`${p} selected ✓`);
      });
    });

    // ====== TASKS (+0.1 TRX each, one-time) ======
    $$('.complete').forEach(b=>{
      b.addEventListener('click', ()=>{
        const id = b.dataset.id;
        if(state.tasks[id]) return;
        state.tasks[id] = true;
        state.balance += 0.1;
        render(); save();
      });
    });

    // ====== TICK (mining) ======
    function tick(){
      const now = Date.now();
      const dt = Math.max(0, now - state.lastTick);
      if(state.mining){
        const dsec = Math.floor(dt/1000);
        if(dsec>0){
          state.lastTick += dsec*1000;
          state.sessionSec += dsec;
          state.balance += state.rate * dsec;
          render(); save();
        }
      }else{
        state.lastTick = now;
      }
      requestAnimationFrame(tick);
    }

    render();
    requestAnimationFrame(tick);
  </script>
</body>
                                                                                    </html>
